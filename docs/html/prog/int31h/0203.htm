<html>
<head>
  <title>DOS/32 Advanced DOS Extender - Documentation: Programmer's Reference []</title>
  <link rel="stylesheet" href="../../sheet.css">
</head>
<body bgcolor="#ffffff" link="#0000f0" alink="#f00000" vlink="#700070">

<table cellpadding="0" cellspacing="0" border="0" width="660"><tr><td>



<p>&nbsp;</p>

<p><center><b><i><font color="#990000" size=+2>DOS/32 Advanced DOS Extender
- Programmer's Reference</font></i></b></center></p>

<p><center><hr width="90%" size="1"></center></p>

<p><b><font face="Verdana, Arial, Helvetica">2.20 - DPMI function 0203h
- Set Processor Exception Handler Vector </font></b></p>

<p><font size=-1 face="Verdana, Arial, Helvetica">Sets the address of a
handler for a CPU exception or fault, allowing a protected mode application
to intercept processor exceptions (such as segment not present faults) that
are not handled by the DPMI host and would otherwise generate a fatal error.</font></p>

<p>&nbsp;</p>

<p><center><table width="90%" border="1" cellspacing="0" cellpadding="4">
<tr>
<td width="10%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">In:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">AX</font></b><font size=-1
 face="Verdana, Arial, Helvetica"> = 0203h<br>
<b>BL</b> = exception/fault number (00-1Fh)<br>
<b>CX:EDX </b>= selector:offset of exception handler</font></td></tr>
<tr>
<td width="10%" valign="TOP" bgcolor="#dedede"><b><font size=-1 face="Verdana, Arial, Helvetica">Out:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#dedede"><p><font size=-1 face="Verdana, Arial, Helvetica">if successful:<br>
<b>CF</b> clear</font></p>

<p><font size=-1 face="Verdana, Arial, Helvetica">if failed:<br>
<b>CF</b> set<br>
<b>AX</b> = error code</font></p>

<blockquote>
  <p><b><font size=-1 face="Verdana, Arial, Helvetica">8021h</font></b><font
   size=-1 face="Verdana, Arial, Helvetica"> - invalid value (BL not in range
  00-1Fh)<br>
  <b>8022h</b> - invalid selector</font></blockquote>
</td></tr>
</table>
</center></p>

<p><b><font size=-1 face="Verdana, Arial, Helvetica">Notes: </font></b></p>

<blockquote>
  <p><font size=-1 face="Verdana, Arial, Helvetica">a) The value passed in
  CX should be a valid protected mode code (executable) selector, not a real
  mode segment address.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">b) Every exception is
  first examined by the DPMI host. If the host does not handle the exception,
  it reflects the exception to the first handler in the protected mode exception
  handler chain.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">c) DOS/32 Advanced DPMI
  supports only first 16 exceptions. Calls to this function with value in
  BL greater than 0Fh, but less than 1Fh, will return without performing
  any action.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">d) DOS/32 Advanced DPMI
  does not handle exception 0Ch (Stack Fault).</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">e) DOS/32 Advanced DPMI
  will install exceptions 08-0Fh in an internal buffer, not in IDT, when
  PIC master is mapped on these interrupts (INTs 08-0Fh). </font></p>
</blockquote>

<p>&nbsp;</p>
<p><center><hr width="90%" size="1"></center></p>
<p><center><font size=-2 face="Verdana, Arial, Helvetica">Copyright © Supernar Systems, Ltd. 1996-2002<br>All Rights Reserved.</font></center>
</td></tr></table>
</body>
</html>
